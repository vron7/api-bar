(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{121:function(e,t,a){e.exports=a(411)},131:function(e,t,a){},409:function(e,t,a){},411:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(42),s=a.n(o),c=a(45),i=a(27),l=a(116),u=a(117),d=(a(131),a(43)),m=a(44),E=a(47),h=a(46),p=["light-purple","gold","hot-pink","orange","green","dark-gray"],g=function(e){var t,a=e.idx,n=e.id,o=e.name,s=e.getSomething,c="f6 link ma1 dim br3 ph3 pv2 mb2 dib white shadow-3 bg-".concat(p[a]?p[a]:"hot-pink");return r.a.createElement("a",{href:"#0",className:c,onClick:(t=n,function(){return s(t)})},o)},f=function(e){var t=e.buttons,a=e.onClick;return r.a.createElement("div",{className:"tc bg-washed-yellow br3 pa3 ma2 bw2 shadow-5"},t.map((function(e,t){return r.a.createElement(g,{key:t,idx:t,name:e.name,id:e.id,getSomething:a})})))},b=(a(132),"joke"),v="quote",w="facts",y="cats",S="cat_img",O="covid",_=[{id:b,name:"Joke"},{id:v,name:"Dev"},{id:w,name:"Fact"},{id:y,name:"Meow"},{id:S,name:"Cat pic"},{id:O,name:"Covid"}],R="text",U="image",N="initial",j="covid-text";function I(e,t){this.data=e,this.format=t}function C(){var e=new Date;return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)}var L=function(e,t){switch(console.log("dbg data to wisdom",e,t),e){case b:return new I("single"===t.type?t.joke:t.setup+" "+t.delivery,R);case v:return new I("".concat(t.en," - ").concat(t.author),R);case w:return new I(t.text,R);case y:return new I(t.data[0],R);case S:return new I(t.file,U);case O:return new I(function(e){if(console.log("dbg covid data",e,C()),e.error)return"I apologize, there is no data for today yet, try again later...";var t=e.dates[C()].countries.Estonia;return{new:t.today_new_confirmed,died:t.today_new_deaths,recovered:t.today_new_recovered}}(t),j);default:return""}},k=!1,T=function(e){var t=e.content,a=void 0===t?{}:t,n=e.isWaiting,o=e.isLoaded,s=e.onResourceLoaded,c="bubble chat-box br4 pa3 bg-white shadow-3";if(!a.data)return r.a.createElement("div",{className:c},r.a.createElement("p",null,"..."));switch(a.format){case N:return r.a.createElement("div",{className:c},r.a.createElement("p",null,"Hi stranger!",r.a.createElement("br",null),"My name is ",r.a.createElement("strong",null,a.data)," and I'm honored to be your host today.",r.a.createElement("br",null)," How can I entertain you ?"));case j:return c+=n?" scale-out-center":" scale-up-center",r.a.createElement("div",{className:c},r.a.createElement("p",null,"Let me share my ",r.a.createElement("strong",null,"COVID-19 \ud83d\ude37")," stats  with you ...",r.a.createElement("br",null),"(As of today, in Estonia)",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("strong",null,a.data.new)," new cases confirmed \ud83d\ude80",r.a.createElement("br",null),r.a.createElement("strong",null,a.data.died)," people died \ud83d\ude4f",r.a.createElement("br",null),r.a.createElement("strong",null,a.data.recovered)," people recovered \ud83d\udc4d"));case R:return c+=n?" scale-out-center":" scale-up-center",r.a.createElement("div",{className:c},r.a.createElement("p",null,a.data));case U:var i="loader-container",l="bubble-img shadow-3";return o?(k=!1,l+=" swing-in-bottom-fwd"):k=!0,k&&(console.log("dbg loader show"),i+=" show",l+=" swing-out-bottom-bck"),r.a.createElement("div",{className:"bubble-img-container"},r.a.createElement("img",{className:l,src:a.data,onLoad:s}),r.a.createElement("div",{className:i},r.a.createElement("div",{className:"loader"})));default:return r.a.createElement("div",{className:c},r.a.createElement("p",null,"Oops, something went wrong!"))}},P=function(e){var t=e.id;return r.a.createElement("div",{className:"tc"},r.a.createElement("img",{className:"barman",alt:"avatar",src:"https://robohash.org/".concat(t,"?size=200x200")}),r.a.createElement("div",{className:"bar-top"},r.a.createElement("div",{className:"beer"})))},D=function(e){Object(E.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(m.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Ooooops. That is not good"):this.props.children}}]),a}(n.Component),W=(a(409),function(){return function(e){e({type:"REQUEST_USERS_PENDING"}),fetch("https://jsonplaceholder.typicode.com/users").then((function(e){return e.json()})).then((function(t){var a,n=function(e){var t=e[Math.floor(Math.random()*e.length)];return{id:t.id,name:t.name}}(t);e({type:"REQUEST_USERS_SUCCESS",payload:n}),e({type:"INITIAL_TOPIC",payload:(a=n.name,new I(a,N))})})).catch((function(t){return e({type:"REQUEST_USERS_FAILED",payload:t})}))}}),q=function(e){return function(t){t({type:"REQUEST_TOPIC_PENDING"}),t({type:"RESOURCE_LOADING"}),fetch(function(e){switch(console.log("dbg get uri for topic",e),e){case b:return"https://sv443.net/jokeapi/v2/joke/Any";case v:return"https://programming-quotes-api.herokuapp.com/quotes/random";case w:return"https://uselessfacts.jsph.pl/random.json?language=en";case y:return"https://meowfacts.herokuapp.com/";case S:return"https://aws.random.cat/meow";case O:return"https://api.covid19tracking.narrativa.com/api/".concat(C(),"/country/estonia");default:return""}}(e)).then((function(e){return e.json()})).then((function(t){return L(e,t)})).then((function(e){t({type:"REQUEST_TOPIC_SUCCESS",payload:e})})).catch((function(e){return t({type:"REQUEST_TOPIC_FAILED",payload:e})}))}},A=function(e){Object(E.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.onRequestUsers()}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.isPending,n=e.onRequestWisdom,o=e.wisdom,s=e.isWaiting,c=e.onResourceLoaded,i=e.isLoaded;return a||!t?r.a.createElement("h1",{className:"tc"},"Loading..."):r.a.createElement("div",{className:"tc "},r.a.createElement("h1",{className:"f1"},"API-bar"),r.a.createElement("div",{className:"tc bg-light-green br3 pa3 ma2 bw2 shadow-5"},r.a.createElement(D,null,r.a.createElement(T,{content:o,isWaiting:s,isLoaded:i,onResourceLoaded:c}),r.a.createElement(P,{id:t.id}))),r.a.createElement(f,{buttons:_,onClick:n}))}}]),a}(r.a.Component),Q=Object(c.b)((function(e){return console.log("dbg mapStateToProps",e),{user:e.requestUsers.user,isPending:e.requestUsers.isPending,error:e.requestUsers.error,wisdom:e.requestWisdom.wisdom,isWaiting:e.requestWisdom.isWaiting,isLoaded:e.resourceLoaded.isLoaded}}),(function(e){return{onRequestUsers:function(){return e(W())},onRequestWisdom:function(t){return e(q(t))},onResourceLoaded:function(){return e({type:"RESOURCE_LOADED"})}}}))(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x={isPending:!1,user:null,error:""},F={isWaiting:!1,wisdom:"",error:""},G={isLoaded:!1},M=(a(410),Object(l.createLogger)()),J=Object(i.c)({requestWisdom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"REQUEST_TOPIC_PENDING":return Object.assign({},e,{isWaiting:!0});case"INITIAL_TOPIC":case"REQUEST_TOPIC_SUCCESS":return Object.assign({},e,{wisdom:t.payload,isWaiting:!1});case"REQUEST_TOPIC_FAILED":return Object.assign({},e,{error:t.payload,isWaiting:!1});default:return e}},requestUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"REQUEST_USERS_PENDING":return Object.assign({},e,{isPending:!0});case"REQUEST_USERS_SUCCESS":return Object.assign({},e,{user:t.payload,isPending:!1});case"REQUEST_USERS_FAILED":return Object.assign({},e,{error:t.payload,isPending:!1});default:return e}},resourceLoaded:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"RESOURCE_LOADED":return Object.assign({},e,{isLoaded:!0});case"RESOURCE_LOADING":return Object.assign({},e,{isLoaded:!1});default:return e}}}),z=Object(i.d)(J,Object(i.a)(u.a,M));s.a.render(r.a.createElement(c.a,{store:z},r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[121,1,2]]]);
//# sourceMappingURL=main.ed43e449.chunk.js.map