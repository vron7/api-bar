(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{121:function(e,t,n){e.exports=n(411)},131:function(e,t,n){},409:function(e,t,n){},411:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(42),s=n.n(o),c=n(45),i=n(27),l=n(116),u=n(117),d=(n(131),n(43)),m=n(44),g=n(47),E=n(46),h=["light-purple","gold","hot-pink","orange","green","dark-gray"],p=function(e){var t,n=e.idx,a=e.id,o=e.name,s=e.getSomething,c="f6 link ma1 dim br3 ph3 pv2 mb2 dib white shadow-3 bg-".concat(h[n]?h[n]:"hot-pink");return r.a.createElement("a",{href:"#0",className:c,onClick:(t=a,function(){return s(t)})},o)},b=function(e){var t=e.buttons,n=e.onClick;return r.a.createElement("div",{className:"tc bg-washed-yellow br3 pa3 ma2 bw2 shadow-5"},t.map((function(e,t){return r.a.createElement(p,{key:t,idx:t,name:e.name,id:e.id,getSomething:n})})))},f=(n(132),"joke"),v="quote",w="facts",y="cats",S="cat_img",O="covid",_=[{id:f,name:"Joke"},{id:v,name:"Dev"},{id:w,name:"Fact"},{id:y,name:"Meow"},{id:S,name:"Cat pic"},{id:O,name:"Covid"}],R="text",N="image",I="initial",U="covid-text";function j(e,t){this.data=e,this.format=t}function C(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}var T=function(e,t){switch(console.log("dbg data to wisdom",e,t),e){case f:return new j("single"===t.type?t.joke:t.setup+" "+t.delivery,R);case v:return new j("".concat(t.en," - ").concat(t.author),R);case w:return new j(t.text,R);case y:return new j(t.data[0],R);case S:return new j(t.file,N);case O:return new j(function(e){if(console.log("dbg covid",C(),e),e.error)return"I apologize, there is no data for today yet, try again later...";var t=e.dates[C()].countries.Estonia;return{new:t.today_new_confirmed,died:t.today_new_deaths,recovered:t.today_new_recovered}}(t),U);default:return""}},L=!1,k=function(e){var t=e.content,n=void 0===t?{}:t,a=e.isWaiting,o=e.isLoaded,s=e.onResourceLoaded,c="bubble chat-box br4 pa3 bg-white shadow-3";if(console.log("dbg bubble render --------------------\x3e START"),console.log("dbg bubble render CONTENT:",n,n.data),console.log("dbg bubble render FORMAT:",n.format),console.log("dbg bubble render ISWAITING:",a),console.log("dbg bubble render ISLOADED:",o),console.log("dbg bubble render --------------------\x3e END"),!n.data)return r.a.createElement("div",{className:c},r.a.createElement("p",null,"..."));switch(n.format){case I:return r.a.createElement("div",{className:c},r.a.createElement("p",null,"Hi stranger!",r.a.createElement("br",null),"My name is ",r.a.createElement("strong",null,n.data)," and I'm honored to be your host today.",r.a.createElement("br",null)," How can I entertain you ?"));case U:return c+=a?" scale-out-center":" scale-up-center",r.a.createElement("div",{className:c},r.a.createElement("p",null,"Let me share my ",r.a.createElement("strong",null,"COVID-19 \ud83d\ude37")," stats  with you ...",r.a.createElement("br",null),"(As of today, in Estonia)",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("strong",null,n.data.new)," new cases confirmed \ud83d\ude80",r.a.createElement("br",null),r.a.createElement("strong",null,n.data.died)," people died \ud83d\ude4f",r.a.createElement("br",null),r.a.createElement("strong",null,n.data.recovered)," people recovered \ud83d\udc4d"));case R:return c+=a?" scale-out-center":" scale-up-center",r.a.createElement("div",{className:c},r.a.createElement("p",null,n.data));case N:var i="loader-container",l="bubble-img shadow-3";return o?(L=!1,l+=" swing-in-bottom-fwd"):L=!0,L&&(console.log("dbg loader show"),i+=" show",l+=" swing-out-bottom-bck"),r.a.createElement("div",{className:"bubble-img-container"},r.a.createElement("img",{className:l,src:n.data,onLoad:s}),r.a.createElement("div",{className:i},r.a.createElement("div",{className:"loader"})));default:return r.a.createElement("div",{className:c},r.a.createElement("p",null,"Oops, something went wrong!"))}},D=function(e){var t=e.id;return r.a.createElement("div",{className:"tc"},r.a.createElement("img",{className:"barman",alt:"avatar",src:"https://robohash.org/".concat(t,"?size=200x200")}),r.a.createElement("div",{className:"bar-top"},r.a.createElement("div",{className:"beer"})))},P=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={hasError:!1},a}return Object(m.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Ooooops. That is not good"):this.props.children}}]),n}(a.Component),A=(n(409),function(){return function(e){e({type:"REQUEST_USERS_PENDING"}),fetch("https://jsonplaceholder.typicode.com/users").then((function(e){return e.json()})).then((function(t){var n,a=function(e){var t=e[Math.floor(Math.random()*e.length)];return{id:t.id,name:t.name}}(t);e({type:"REQUEST_USERS_SUCCESS",payload:a}),e({type:"INITIAL_TOPIC",payload:(n=a.name,new j(n,I))})})).catch((function(t){return e({type:"REQUEST_USERS_FAILED",payload:t})}))}}),W=function(e){return function(t){console.log("dbg req wisdom",e),t({type:"REQUEST_TOPIC_PENDING"}),t({type:"RESOURCE_LOADING"}),fetch(function(e){switch(console.log("dbg get uri for topic",e),e){case f:return"https://sv443.net/jokeapi/v2/joke/Any";case v:return"https://programming-quotes-api.herokuapp.com/quotes/random";case w:return"https://uselessfacts.jsph.pl/random.json?language=en";case y:return"https://meowfacts.herokuapp.com/";case S:return"https://aws.random.cat/meow";case O:return"https://api.covid19tracking.narrativa.com/api/".concat(C(),"/country/estonia");default:return""}}(e)).then((function(e){return e.json()})).then((function(t){return T(e,t)})).then((function(e){t({type:"REQUEST_TOPIC_SUCCESS",payload:e})})).catch((function(e){return t({type:"REQUEST_TOPIC_FAILED",payload:e})}))}},q=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.onRequestUsers()}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.isPending,a=e.onRequestWisdom,o=e.wisdom,s=e.isWaiting,c=e.onResourceLoaded,i=e.isLoaded;return n||!t?r.a.createElement("h1",{className:"tc"},"Loading..."):r.a.createElement("div",{className:"tc "},r.a.createElement("h1",{className:"f1"},"API-bar"),r.a.createElement("div",{className:"tc bg-light-green br3 pa3 ma2 bw2 shadow-5"},r.a.createElement(P,null,r.a.createElement(k,{content:o,isWaiting:s,isLoaded:i,onResourceLoaded:c}),r.a.createElement(D,{id:t.id}))),r.a.createElement(b,{buttons:_,onClick:a}))}}]),n}(r.a.Component),Q=Object(c.b)((function(e){return console.log("dbg mapStateToProps",e),{user:e.requestUsers.user,isPending:e.requestUsers.isPending,error:e.requestUsers.error,wisdom:e.requestWisdom.wisdom,isWaiting:e.requestWisdom.isWaiting,isLoaded:e.resourceLoaded.isLoaded}}),(function(e){return{onRequestUsers:function(){return e(A())},onRequestWisdom:function(t){return e(W(t))},onResourceLoaded:function(){return e({type:"RESOURCE_LOADED"})}}}))(q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x={isPending:!1,user:null,error:""},F={isWaiting:!1,wisdom:"",error:""},G={isLoaded:!1},M=(n(410),Object(l.createLogger)()),J=Object(i.c)({requestWisdom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"REQUEST_TOPIC_PENDING":return Object.assign({},e,{isWaiting:!0});case"INITIAL_TOPIC":case"REQUEST_TOPIC_SUCCESS":return Object.assign({},e,{wisdom:t.payload,isWaiting:!1});case"REQUEST_TOPIC_FAILED":return Object.assign({},e,{error:t.payload,isWaiting:!1});default:return e}},requestUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"REQUEST_USERS_PENDING":return Object.assign({},e,{isPending:!0});case"REQUEST_USERS_SUCCESS":return Object.assign({},e,{user:t.payload,isPending:!1});case"REQUEST_USERS_FAILED":return Object.assign({},e,{error:t.payload,isPending:!1});default:return e}},resourceLoaded:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"RESOURCE_LOADED":return Object.assign({},e,{isLoaded:!0});case"RESOURCE_LOADING":return Object.assign({},e,{isLoaded:!1});default:return e}}}),z=Object(i.d)(J,Object(i.a)(u.a,M));s.a.render(r.a.createElement(c.a,{store:z},r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[121,1,2]]]);
//# sourceMappingURL=main.0abe92eb.chunk.js.map